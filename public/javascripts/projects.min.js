let projects={initialise:(void 0,async()=>{projects.declareVariables();var e=0;profile.allProjects.length&&(profile.allProjects.forEach((function(e,t){projects.renderSmallCard(e),projects.renderProjPop(e,profile.allMakes)})),profile.allProjects.sort((function(e,t){return new Date(e.date.modified)-new Date(t.date.modified)})),profile.allProjects.forEach((function(t,r){t.bookmark&&(projects.renderFavCard(t),e+=1)}))),document.getElementById("proj-fav-header").innerHTML="Favourites ("+e+")",document.getElementById("proj-new-header").innerHTML="All ("+profile.allProjects.length+")",projects.eventListeners(),projects.renderProjPop(null,profile.allMakes)}),declareVariables:(void 0,()=>{swiper=new Swiper(".swiper-container")}),eventListeners:(void 0,()=>{const e=window.matchMedia("(min-width: 850px)");let t=document.getElementById("proj-fav-container");t.addEventListener("wheel",(function(e){e.deltaY>0?t.scrollLeft+=100:t.scrollLeft-=100,e.preventDefault()}));let r=document.getElementById("proj-all-container");r.addEventListener("wheel",(function(t){e.matches&&(t.deltaY>0?r.scrollLeft+=100:r.scrollLeft-=100,t.preventDefault())})),document.getElementById("proj-add").addEventListener("click",()=>{projects.showProjPop()})}),loadUserData:(void 0,async()=>{let e;try{e=(await axios.get("/profile/customer/fetch/makes")).data}catch(t){e={status:"error",content:t}}if("error"===e.status)return;if("failed"===e.status)return;const t=e.content;let r;try{r=(await axios.get("/profile/customer/fetch/all_proj")).data}catch(e){r={status:"error",content:e}}if("error"===r.status)return;if("failed"===r.status)return;return[r.content,t]}),capFirstLetter:(void 0,e=>e.charAt(0).toUpperCase()+e.slice(1)),renderFavCard:(void 0,e=>{let t=document.createElement("div");t.id=e.id+"-proj-fav",t.className="proj-fav",t.addEventListener("click",()=>{projects.showProjPop(e.id)});let r=document.createElement("img");t.appendChild(r).className="proj-fav-img",r.src="/profile/projects/retrieve-thumbnail/"+e.id+"?"+(new Date).getTime();let o=document.createElement("div");t.appendChild(o).className="proj-fav-overlay";let a=document.createElement("div");t.appendChild(a).className="proj-fav-content";let n=document.createElement("div");n.innerHTML=e.name,a.appendChild(n).className="proj-fav-name";let p=document.createElement("div");a.appendChild(p).className="proj-fav-makes",e.makes.forEach((function(e,t){""!==p.innerHTML&&(p.innerHTML+=", "),p.innerHTML+=e.file.name}));let l=document.createElement("div");a.appendChild(l).className="proj-fav-notes",l.innerHTML=e.notes,document.getElementById("proj-fav-container").prepend(t)}),updateFavCard:(void 0,e=>{let t=document.getElementById("proj-fav-"+e.id);t.querySelector(".proj-fav-name").innerHTML=e.name,t.querySelector(".proj-fav-img").src="/profile/projects/retrieve-thumbnail/"+e.thumbnail;let r=t.querySelector(".proj-fav-makes");r.innerHTML="",e.makes.forEach((function(e,t){""!==r.innerHTML&&(r.innerHTML+=", "),r.innerHTML+=e.file.name})),t.querySelector(".proj-fav-notes").innerHTML=e.notes}),renderSmallCard:(void 0,e=>{let t=document.createElement("div");t.id=e.id+"-proj-small",t.addEventListener("click",()=>{projects.showProjPop(e.id)});let r=document.createElement("i");e.bookmark?t.appendChild(r).className="fas fa-bookmark":t.appendChild(r).className="far fa-bookmark",r.addEventListener("click",t=>{projects.updateBookmark(t,e,r)});let o=document.createElement("img");t.appendChild(o).className="proj-small-img",o.src="/profile/projects/retrieve-thumbnail/"+e.id;let a=document.createElement("div");t.appendChild(a).className="proj-small-name";let n=document.createElement("p");n.innerHTML=e.name,a.appendChild(n),document.getElementById("proj-all-container").appendChild(t).className="proj-small"}),updateSmallCard:(void 0,e=>{let t=document.getElementById("proj-small-"+e.id),r=t.querySelector(".fa-bookmark");e.bookmark?r.className="fas fa-bookmark":r.className="far fa-bookmark",t.querySelector(".proj-small-name").innerHTML=e.name,t.querySelector(".proj-small-img").src="/profile/projects/retrieve-thumbnail/"+e.id}),renderMakeBars:(void 0,(e,t,r)=>{t||((t=new Object).id="new",t.makes=[]),e.forEach((function(e){let o=document.createElement("div");o.className="proj-pop-bar",o.id=t.id+"-"+e.id+"-proj-pop-bar",o.appendChild(document.createElement("p")).innerHTML=e.file.name,o.appendChild(document.createElement("i")).className="far fa-check-circle";let a=document.createElement("div");a.className="proj-pop-bar-tooltip-wrapper";let n=document.createElement("div");n.className="proj-pop-bar-tooltip",n.appendChild(document.createElement("p")).innerHTML="M: "+e.material.toUpperCase(),n.appendChild(document.createElement("p")).innerHTML="Q: "+projects.capFirstLetter(e.quality),n.appendChild(document.createElement("p")).innerHTML="S: "+projects.capFirstLetter(e.strength),n.appendChild(document.createElement("p")).innerHTML="C: "+projects.capFirstLetter(e.colour),a.appendChild(n),o.appendChild(a),o.addEventListener("click",()=>{projects.toggleMakeBars(o,e,t.id)}),o.addEventListener("mouseover",()=>{a.style.top=o.offsetTop-r.scrollTop-a.offsetHeight/2+o.offsetHeight/2+"px"}),r.appendChild(o)})),t.makes.length&&t.makes.forEach((function(e){let r=document.getElementById(t.id+"-"+e.id+"-proj-pop-bar");r.classList.toggle("proj-pop-bar-active"),r.querySelector("i").className="fa-check-circle fas",projects.renderMakeBlobs(e,t.id)}))}),toggleMakeBars:(void 0,(e,t,r)=>{e.classList.contains("proj-pop-bar-active")?projects.removeMakeBlobs(document.getElementById(r+"-"+t.id+"-proj-pop-blob")):projects.renderMakeBlobs(t,r),e.querySelector("i").classList.toggle("fas"),e.querySelector("i").classList.toggle("far"),e.classList.toggle("proj-pop-bar-active")}),renderMakeBlobs:(void 0,(e,t)=>{let r=document.createElement("div");r.className="proj-pop-blob",r.id=t+"-"+e.id+"-proj-pop-blob",r.appendChild(document.createElement("p")).innerHTML=e.file.name,r.appendChild(document.createElement("div")).className="proj-pop-blob-x",r.addEventListener("click",()=>{projects.toggleMakeBars(document.getElementById(t+"-"+e.id+"-proj-pop-bar"),e,t)}),document.getElementById(t+"-proj-pop-wrapper").querySelector(".proj-pop-blob-container").appendChild(r)}),removeMakeBlobs:(void 0,e=>{e.remove()}),renderProjPop:(void 0,(e,t)=>{let r=document.createElement("div");r.className="proj-pop-wrapper",document.getElementById("proj-area-wrapper").appendChild(r);let o=document.createElement("div");o.className="proj-pop-back",o.addEventListener("click",()=>{projects.cancel(o)}),r.appendChild(o);let a=document.createElement("p");a.innerHTML="Cancel",o.appendChild(a);let n=document.createElement("div");n.className="proj-pop-container",r.appendChild(n);let p=document.createElement("div");p.className="proj-pop-left",n.appendChild(p);let l=document.createElement("label");p.appendChild(l);let d=document.createElement("form");p.appendChild(d);let c=document.createElement("input");c.type="file",c.name="picture",c.accept="image/*",c.setAttribute("onchange","projects.previewImage(this, event);"),d.appendChild(c);let i=document.createElement("img");i.className="proj-pop-img",i.alt="Project Thumbnail",p.appendChild(i);let s=document.createElement("div");s.className="proj-pop-img-overlay",p.appendChild(s);let m=document.createElement("div");m.className="proj-pop-img-edit",m.innerHTML="Click anywhere on the image to edit",p.appendChild(m);let u=document.createElement("div");u.className="proj-pop-mid",n.appendChild(u);let j=document.createElement("i");j.className="far fa-bookmark proj-pop-bookmark",j.addEventListener("click",()=>{j.classList.toggle("fas"),j.classList.toggle("far")}),u.appendChild(j);let f=document.createElement("h3");f.innerHTML="Name",u.appendChild(f);let v=document.createElement("input");v.type="text",v.className="proj-pop-name",v.placeholder="Give your project a name",u.appendChild(v);let h=document.createElement("h3");h.className="proj-pop-makes-header",h.innerHTML="Makes",u.appendChild(h);let g=document.createElement("div");g.className="proj-pop-blob-container",u.appendChild(g);let E=document.createElement("h3");E.innerHTML="Notes",u.appendChild(E);let y=document.createElement("textarea");y.className="proj-pop-notes",y.placeholder="Add notes to your project",y.style.resize="none",u.appendChild(y);let k=document.createElement("div");k.className="proj-pop-btn-container",u.appendChild(k);let b=document.createElement("i");b.className="far fa-trash-alt proj-pop-delete",b.addEventListener("click",()=>{projects.trash(e.id)}),k.appendChild(b);let w=document.createElement("button");w.className="grad-btn proj-pop-save",w.innerHTML="Save",w.addEventListener("click",r=>{r.target.classList.contains("new-proj-save-btn")?projects.saveNew(t):projects.saveExisting(e.id,t)}),k.appendChild(w);let L=document.createElement("div");L.className="proj-pop-right",n.appendChild(L);let C=document.createElement("h3");C.innerHTML="Add to your project",L.appendChild(C);let M=document.createElement("div");M.className="proj-pop-bar-wrapper",L.appendChild(M);let B=document.createElement("div");B.className="proj-pop-bar-container",M.appendChild(B);let N=document.createElement("p");N.innerHTML="You can add Makes to this project later",L.appendChild(N);let I=document.createElement("div");I.className="proj-pop-btn-container",n.appendChild(I);let S=document.createElement("i");S.className="far fa-trash-alt proj-pop-delete",S.addEventListener("click",()=>{projects.trash(e.id)}),I.appendChild(S);let T=document.createElement("button");T.className="grad-btn proj-pop-save",T.innerHTML="Save",T.addEventListener("click",r=>{r.target.classList.contains("new-proj-pop-wrapper")?projects.saveNew(t):projects.saveExisting(e.id,t)}),I.appendChild(T),e?(r.id=e.id+"-proj-pop-wrapper",d.id=e.id+"-proj-img-form",l.htmlFor=e.id+"-proj-pop-img-input",c.id=e.id+"-proj-pop-img-input",i.src="/profile/projects/retrieve-thumbnail/"+e.id,e.bookmark&&(j.className="fas fa-bookmark proj-pop-bookmark"),v.value=e.name,y.value=e.notes,projects.renderMakeBars(t,e,B)):(r.id="new-proj-pop-wrapper",d.id="new-proj-img-form",l.htmlFor="new-proj-pop-img-input",c.id="new-proj-pop-img-input",i.src="/public/images/profile/project-thumbnail.jpeg",T.classList.add("new-proj-save-btn"),w.classList.add("new-proj-save-btn"),projects.renderMakeBars(t,null,B))}),showProjPop:(void 0,e=>{window.matchMedia("(min-width: 850px)").matches&&(document.getElementById("proj-card-wrapper").style.top="-100%"),e?document.getElementById(e+"-proj-pop-wrapper").style.top="0":document.getElementById("new-proj-pop-wrapper").style.top="0"}),hideProjPop:(void 0,(e,t,r)=>{window.matchMedia("(min-width: 850px)").matches&&(document.getElementById("proj-card-wrapper").style.top="0"),r&&(document.getElementById(r+"-proj-pop-wrapper").style.top="100%"),e&&projectNotif(e,t)}),cancel:(void 0,e=>{document.getElementById("proj-card-wrapper").style.top="0",e.parentElement.style.top="100%"}),saveNew:(void 0,async e=>{let t=document.getElementById("new-proj-pop-wrapper");const r=await projects.collectNewProject();let o;try{o=(await axios.post("/profile/customer/new/proj",r)).data}catch(e){o={status:"error",content:e}}if("error"===o.status)return;if("failed"===o.status)return projects.hideProjPop(o.status,"new",o.content.id);t.id=o.content.id+"-proj-pop-wrapper",t.querySelector("#new-proj-img-form").id=o.content.id+"-proj-img-form",t.querySelector("label").htmlFor=o.content.id+"-proj-pop-img-input",t.querySelector("#new-proj-pop-img-input").id=o.content.id+"-proj-pop-img-input",t.querySelector(".proj-pop-img").src="/profile/projects/retrieve-thumbnail/"+o.content.id;let a=t.querySelector(".proj-pop-blob-container").children;for(var n=0;n<a.length;n++){(l=a[n].id.split("-")).splice(0,1,o.content.id),a[n].id=l.join("-")}let p=t.querySelector(".proj-pop-blob-container").children;for(n=0;n<p.length;n++){var l;(l=p[n].id.split("-")).splice(0,1,o.content.id),p[n].id=l.join("-")}return t.querySelectorAll(".new-proj-save-btn").forEach((function(e,t){e.classList.remove("new-proj-save-btn")})),o.content.bookmark&&(projects.renderFavCard(o.content),document.getElementById("proj-fav-header").innerHTML=`Favourites (${document.getElementById("proj-fav-container").children.length})`),projects.renderSmallCard(o.content),projects.renderProjPop(null,e),document.getElementById("proj-new-header").innerHTML=`All (${document.getElementById("proj-all-container").children.length-1})`,projects.hideProjPop(o.status,"new",o.content.id)}),saveExisting:(void 0,async(e,t)=>{const r=await projects.collectExistingProject(e);let o;try{o=(await axios.post("/profile/customer/update/proj",r)).data}catch(e){o={status:"error",content:e}}if("error"!==o.status){if("failed"===o.status)return projects.hideProjPop(o.status,"edit",e);if(favCard=document.getElementById(e+"-proj-fav"),o.content.bookmark)if(favCard){favCard.querySelector(".proj-fav-name").innerHTML=o.content.name;let t=favCard.querySelector(".proj-fav-makes");t.innerHTML="",o.content.makes.forEach((function(e,r){""!==t.innerHTML&&(t.innerHTML+=", "),t.innerHTML+=e.file.name})),favCard.querySelector(".proj-fav-notes").innerHTML=o.content.notes,favCard.querySelector(".proj-fav-img").src="/profile/projects/retrieve-thumbnail/"+e+"?"+(new Date).getTime()}else projects.renderFavCard(o.content);else favCard&&favCard.remove();return document.getElementById("proj-fav-header").innerHTML=`Favourites (${document.getElementById("proj-fav-container").children.length})`,smallCard=document.getElementById(e+"-proj-small"),o.content.bookmark?smallCard.querySelector(".fa-bookmark").className="fas fa-bookmark":smallCard.querySelector(".fa-bookmark").className="far fa-bookmark",smallCard.querySelector(".proj-small-name").children[0].innerHTML=o.content.name,smallCard.querySelector(".proj-small-img").src=document.getElementById(e+"-proj-pop-wrapper").querySelector(".proj-pop-img").src,projects.renderProjPop(null,t),projects.hideProjPop(o.status,"edit",e)}}),trash:(void 0,async e=>{let t;try{t=(await axios.post("/profile/customer/delete/proj",{id:e})).data}catch(e){t={status:"error",content:e}}if("error"!==t.status)return"failed"===t.status||(document.getElementById(e+"-proj-pop-wrapper").remove(),document.getElementById(e+"-proj-small").remove(),document.getElementById(e+"-proj-fav")&&(document.getElementById(e+"-proj-fav").remove(),document.getElementById("proj-fav-header").innerHTML=`Favourites (${document.getElementById("proj-fav-container").children.length})`),document.getElementById("proj-new-header").innerHTML=`All (${document.getElementById("proj-all-container").children.length-1})`),projects.hideProjPop(t.status,"delete",null)}),updateBookmark:(void 0,async(e,t,r)=>{e.stopPropagation();let o=new Object;o.updates=new Object,o.id=t.id,o.updates.bookmark=!t.bookmark;let a,n=new FormData;n.append("updates",JSON.stringify(o.updates)),n.append("id",o.id),r.classList.toggle("fas"),r.classList.toggle("far"),document.getElementById(t.id+"-proj-pop-wrapper").querySelector(".proj-pop-bookmark").classList.toggle("fas"),document.getElementById(t.id+"-proj-pop-wrapper").querySelector(".proj-pop-bookmark").classList.toggle("far");try{a=(await axios.post("/profile/customer/update/proj",n)).data}catch(e){a={status:"error",content:e}}"error"!==a.status&&"failed"!==a.status&&(r.classList.contains("fas")?projects.renderFavCard(a.content):document.getElementById(t.id+"-proj-fav").remove(),document.getElementById("proj-fav-header").innerHTML=`Favourites (${document.getElementById("proj-fav-container").children.length})`)}),previewImage:(void 0,(e,t)=>{e.parentElement.parentElement.querySelector(".proj-pop-img").src=URL.createObjectURL(t.target.files[0])}),collectNewProject:(void 0,async()=>{const e=document.getElementById("new-proj-pop-wrapper");let t=new Object;t.name=e.querySelector(".proj-pop-name").value,t.bookmark=e.querySelector(".proj-pop-bookmark").classList.contains("fas"),t.notes=e.querySelector(".proj-pop-notes").value,t.makes=[];let r,o=e.querySelector(".proj-pop-blob-container").children;for(var a=0;a<o.length;a++)t.makes[a]=o[a].id.split("-")[1];return r=0!==document.querySelector("#new-proj-pop-img-input").files.length?await global.compressImage("new-proj-img-form","picture",400):new FormData,r.append("project",JSON.stringify(t)),r}),collectExistingProject:(void 0,async e=>{let t=document.getElementById(e+"-proj-pop-wrapper"),r=new Object;r.updates=new Object,r.id=e,r.updates.name=t.querySelector(".proj-pop-name").value,r.updates.bookmark=t.querySelector(".proj-pop-bookmark").classList.contains("fas"),r.updates.notes=t.querySelector(".proj-pop-notes").value,r.updates.makes=[];let o,a=t.querySelector(".proj-pop-blob-container").children;for(var n=0;n<a.length;n++)r.updates.makes[n]=a[n].id.split("-")[1];return o=0!==document.getElementById(e+"-proj-pop-img-input").files.length?await global.compressImage(e+"-proj-img-form","picture",400):new FormData,o.append("updates",JSON.stringify(r.updates)),o.append("id",r.id),o})};